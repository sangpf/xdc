package com.newins.service.imp;

import java.sql.Timestamp;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.newins.controller.AssessController;
import com.newins.dao.AssessOrderDao;
import com.newins.dao.SubmitAssessAnswerDao;
import com.newins.dao.assess.AssessModelMulti_RelationDao;
import com.newins.dao.assess.AssessModel_BigFiveDao;
import com.newins.dao.assess.AssessModel_MBTIDao;
import com.newins.dao.assess.AssessModel_multi_SumDao;
import com.newins.dao.assess.Assess_model_simpleDao;
import com.newins.model.Assess;
import com.newins.model.AssessAnswer;
import com.newins.model.AssessDelivery;
import com.newins.model.AssessOrder;
import com.newins.model.AssessResult;
import com.newins.model.assess.AssessModelMulti_Relation;
import com.newins.model.assess.AssessModel_BigFive;
import com.newins.model.assess.AssessModel_MBTI;
import com.newins.model.assess.AssessModel_mbti_combination;
import com.newins.model.assess.AssessModel_multi_Sum;
import com.newins.model.assess.Assess_model_simple;
import com.newins.model.assess.ScoreByDimension;
import com.newins.service.AssessDeliveryService;
import com.newins.service.SubmitAssessAnswerService;
import com.newins.util.AjaxResult;
import com.newins.util.MathUtil;
import com.newins.util.StrUtils;
import com.newins.util.VarianceAndStandardDiviation;

/**
 * @Description é€’äº¤æµ‹è¯„ç­”æ¡ˆServiceå±‚å®ç°ç±»
 * @author Guan
 * @time 2016å¹´6æœˆ20æ—¥ ä¸‹åˆ2:08:39
 */
@Service(value = "SubmitAssessAnswerService")
public class SubmitAssessAnswerServiceImp implements SubmitAssessAnswerService {
	private static Logger log = Logger.getLogger(AssessController.class);
	@Autowired
	private SubmitAssessAnswerDao submitAssessAnsDao;
	@Autowired
	@Qualifier("AssessOrder")
	private AssessOrder assessOrder;
	@Autowired
	private AssessDeliveryService assessDeliveryService;
	@Autowired
	private AssessOrderDao assessOrderDao;
	@Autowired
	private AssessModelMulti_RelationDao assessModelMulti_RelationDao;
	@Autowired
	private AssessModel_BigFiveDao assessModel_BigFiveDao;
	@Autowired
	private AssessModel_MBTIDao assessModel_MBTIDao;
	@Autowired
	private AssessModel_multi_SumDao assessModel_multi_SumDao;
	@Autowired
	private Assess_model_simpleDao assess_model_simpleDao;
	
	/**
	 * å°†æ¯æ¡ç­”æ¡ˆå€¼ä»˜ç»™1ä¸ªAnswerå¯¹è±¡ï¼Œå¹¶ç»„æˆListé€’äº¤åˆ°Daoå±‚
	 */
	public boolean insertAssessAnswer(int user_Id, int answer_Num, int aqn_Id, JSONArray jsonAnswerArray) {
		
		// åˆå§‹åŒ–ä¸€ä¸ªanswerListå­˜æ”¾æ¯æ¡é—®å·ç­”æ¡ˆå¯¹è±¡ï¼ˆSurveyAnswer)
		List<AssessAnswer> assessAnsList = new ArrayList<AssessAnswer>();
		for (int i = 0; i < answer_Num; i++) {
			
			AssessAnswer assessAnswer = new AssessAnswer();
			JSONObject oneAnswer = (JSONObject) jsonAnswerArray.get(i);
			
			int qType = Integer.parseInt(oneAnswer.getString("questionType"));
			int aqId = Integer.parseInt(oneAnswer.getString("aqId"));
			String qAnswer = oneAnswer.getString("qAnswer");
			String duration = oneAnswer.getString("duration");
			// æ·»åŠ å±æ€§åˆ°model
			assessAnswer.setUserId(user_Id);
			assessAnswer.setAqnId(aqn_Id);
			assessAnswer.setQuestionType(qType);
			assessAnswer.setAqId(aqId);
			assessAnswer.setqAnswer(qAnswer);
			assessAnswer.setDuration(duration);   // ç­”é¢˜æŒç»­æ—¶é—´
			
			assessAnsList.add(i, assessAnswer);

		}
		// å°†svyAnsListé€’äº¤åˆ°Daoå±‚
		try {
			submitAssessAnsDao.insertAssessAnswer(assessAnsList);
			log.info("------------------>>æµ‹è¯„é—®å·ç­”é¢˜ , æ–°å¢æ•°æ®åˆ° answerè¡¨ä¸­");
			return true;
		} catch (Exception e) {
			e.printStackTrace();
			return false;
		}
		
	}

	/**
	 *  éªŒè¯ç­”æ¡ˆé€’äº¤çŠ¶æ€ï¼Œè¿”å›é€’äº¤æˆåŠŸçŠ¶æ€
	 */
	public AjaxResult insertAssessAnswer(int user_Id, int answer_Num, int aqn_Id,JSONArray jsonAnswerArray, 
			int deliveryId, int aqnCategory) {
		
		log.info("=========================>> orderè¡¨ åŸºç¡€æ•°æ®å·²ç»æ›´æ–°å®Œ, ä¸‹é¢æ›´æ–° answerè¡¨   begin ................");
		AssessResult assessResult = new AssessResult();
		//	æ’å…¥è®°å½•åˆ°ç­”æ¡ˆè¡¨ , å°†æ¯æ¡ç­”æ¡ˆå€¼ä»˜ç»™1ä¸ªAnswerå¯¹è±¡ï¼Œå¹¶ç»„æˆListé€’äº¤åˆ° daoå±‚
		boolean isAssessAnswerExit = insertAssessAnswer(user_Id, answer_Num, aqn_Id,jsonAnswerArray);
		
		Map<String, Object> dataMap = new HashMap<String, Object>();// å°†å‚æ•°å°è£…æˆmapæ ¼å¼
		dataMap.put("userId", user_Id);
		dataMap.put("aqnId", aqn_Id);
		
		if (isAssessAnswerExit) {
			log.info("=====================>>æµ‹è¯„é—®å·ç­”é¢˜å  æ–°å¢æ•°æ®åˆ° Answerè¡¨æˆåŠŸ , ä¸‹é¢å¼€å§‹æŸ¥è¯¢ æµ‹è¯„è¾“å‡ºç»“æœ , å°†æµ‹è¯„ç»“æœä¿å­˜åˆ° orderè¡¨ä¸­ ... "); 
			log.info("æµ‹è¯„é—®å·ç±»å‹ä¸º ,  aqnCategory: "+aqnCategory);
			// ä¿å­˜æµ‹è¯„ç»“æœåˆ° æµ‹è¯„ è®¢å• Orderè¡¨ä¸­
			if(aqnCategory == 0){
				// ç®€å•æµ‹è¯„æ¨¡å‹
				assessResult = Calculation_Assess_model_simple(dataMap,assessResult);
				
			}else if(aqnCategory == 1){
				// å¤šç»´åº¦æµ‹è¯„æ¨¡å‹è®¡ç®—
				assessResult = Calculation_assessModel_multi_Sum(dataMap,assessResult);
				
			}else if(aqnCategory == 3){
				// MBTI æ¨¡å‹
				assessResult = Calculation_AssessModel_MBTI(dataMap,assessResult);
				
			}else if(aqnCategory == 2){
				// å¤§äº”æ¨¡å‹è®¡ç®—
				assessResult = Calculation_AssessModel_BigFive(dataMap,assessResult);
				
			}else{
				log.info("====================>>å½“å‰æµ‹è¯„é—®å·æµ‹è¯„ç±»å‹ aqnCategory é”™è¯¯");
				return AjaxResult.errorCode("aqnCategory is wrong", "008");
			}
			
			log.info("å°†æµ‹è¯„ç»“æœ resultDetail resultSummary å­˜å‚¨åˆ°order è¡¨ä¸­, æµ‹è¯„é—®å·ç­”é¢˜, å°†æµ‹è¯„ç»“æœ å°è£…åˆ° assessResult ä¸­, æ­¤æ—¶çš„ assessResultä¸º :"+assessResult.toString());
			
			if (assessResult != null) {
				assessResult.setAqnId(aqn_Id);
				assessResult.setUserId(user_Id);
				// æ ¹æ®aqnIdå’ŒuserId å°†æµ‹è¯„ç»“æœå­˜å…¥è®¢å•ä¸­
				submitAssessAnsDao.insertResultToOrder(assessResult);
			} else {
				// æŸ¥è¯¢æµ‹è¯„ç»“æœå¤±è´¥
				log.info("--------------------->> æµ‹è¯„é—®å·ç­”é¢˜ä¸­, å½“å‰ç”¨æˆ·ç­”é¢˜åæµ‹è¯„ç»“æœæŸ¥è¯¢ä¸ºç©º ");
				return AjaxResult.errorCode("check assess result failed , æµ‹è¯„ç»“æœä¸ºç©º", "007");
			}
			//éªŒè¯æ˜¯å¦ç­”é¢˜äººæ•°è¾¾åˆ°éœ€è¦æ”¶é›†äººæ•°ï¼Œå¦‚æœè¾¾åˆ°å°†é—®å·çŠ¶æ€æ”¹ä¸º6ï¼Œæ•°é‡å®Œæˆ
			changeDeliveryStatus(deliveryId);// æ›´æ”¹æŠ•æ”¾çŠ¶æ€
			return AjaxResult.successResult("assess answer submit successfully");
			
		} else {
			// æ’å…¥è®°å½•åˆ°ç­”æ¡ˆè¡¨å¤±è´¥
			log.info("--------------------->> æµ‹è¯„é—®å·ç­”é¢˜ä¸­, æ’å…¥è®°å½•åˆ°  answerè¡¨ å¤±è´¥ ");
			return AjaxResult.errorCode("insert into survey answer db failed", "006");
		}

	}
	
	// ç®€å•æµ‹è¯„æ¨¡å‹çš„è®¡ç®—
	private AssessResult Calculation_Assess_model_simple(Map<String, Object> dataMap,AssessResult assessResult){
		log.info("==================================== è®¡ç®—ç®€å•æµ‹è¯„æ¨¡å‹ çš„ è¾“å‡ºç»“æœ  begin .....");
		 // ç®€å•æµ‹è¯„æ¨¡å‹
		// æŸ¥è¯¢è¯¥é—®å·æ‰€æœ‰çš„ç®€å•æµ‹è¯„æ¨¡å‹
		List<Assess_model_simple> assess_model_simple_list = assess_model_simpleDao.getAssess_model_simple_list(dataMap);
		// æŸ¥è¯¢å½“å‰ç”¨æˆ·åœ¨è¯¥é—®å·å¾—åˆ†
		Integer assess_model_simple_score_user = assess_model_simpleDao.get_Assess_model_simple_score_user(dataMap);
		log.info("===============>>æŸ¥è¯¢å½“å‰ç”¨æˆ·åœ¨è¯¥é—®å·å¾—åˆ† :"+assess_model_simple_score_user);
		
		int interval_min = 0;
		int interval_max = 0;
		
		// å¾—å‡º åŒºé—´æœ€å°å€¼, æœ€å¤§å€¼
		Iterator<Assess_model_simple> iterator = assess_model_simple_list.iterator();
		while(iterator.hasNext()){
			Assess_model_simple next = iterator.next();
			Integer intervalBegin = next.getIntervalBegin();
			Integer intervalEnd = next.getIntervalEnd();
			if(intervalBegin < interval_min){
				interval_min = intervalBegin;
			}
			if(intervalEnd > interval_max){
				interval_max = intervalEnd;
			}
		}
		log.info("===========================>> ç®€å•æµ‹è¯„æ¨¡å‹, å¾—å‡ºåŒºé—´æœ€å°å€¼ä¸º: "+interval_min + " ,æœ€å¤§å€¼ä¸º :"+interval_max);
		// å¾—åˆ†éè´ŸåŒ–
		double user_score = MathUtil.sub(assess_model_simple_score_user, interval_min);  // å¾—åˆ† éè´ŸåŒ–
		double max_score = MathUtil.sub(interval_max, interval_min);   // æœ€å¤§åŒºé—´ éè´Ÿ
		log.info("======================>> å°†å¾—åˆ† å’Œæœ€å¤§åˆ† è¿›è¡Œéè´ŸåŒ– , å¾—åˆ†éè´ŸåŒ– :"+user_score + " æœ€å¤§åŒºé—´åˆ†éè´ŸåŒ– :"+max_score);
		// ç”¨æˆ·å¾—åˆ† ç™¾åˆ†åŒ–
		double user_score_div = MathUtil.div(user_score, max_score, 10);  
		log.info("========================>>ç”¨æˆ·å¾—åˆ† ç™¾åˆ†åŒ– : "+user_score_div);
		log.info("========================>>ç”¨æˆ·å¾—åˆ† ç™¾åˆ†åŒ– : "+user_score_div * 100);
		assessResult.setPercentageScore(user_score_div * 100);
		
		Iterator<Assess_model_simple> iterator2 = assess_model_simple_list.iterator();
		
		// å–å‡º æ¯ä¸ªåŒºé—´çš„æ•°æ® , å°†åŒºé—´å€¼ç™¾åˆ†åŒ–
		while(iterator2.hasNext()){
			Assess_model_simple next = iterator2.next();
			Integer intervalBegin = next.getIntervalBegin();
			Integer intervalEnd = next.getIntervalEnd();
			
			// å°†åŒºé—´  éè´Ÿ
			double intervalBegin_sub = MathUtil.sub(intervalBegin, interval_min);
			double intervalEnd_sub = MathUtil.sub(intervalEnd, interval_min);
			
			if(user_score >= intervalBegin_sub && user_score <= intervalEnd_sub){
				assessResult.setResultDetail(next.getResultDetail());
				assessResult.setResultSummary(next.getResultSummary());
			}
			
			// å°†åŒºé—´ ç™¾åˆ†åŒ–
//			double intervalBegin_div = MathUtil.div(intervalBegin_sub, max_score, 10);
//			double intervalEnd_div = MathUtil.div(intervalEnd_sub, max_score, 10);
//			log.info("======================>> æ¯ä¸ªåŒºé—´æœ€å°å€¼å’Œæœ€å¤§å€¼ç™¾åˆ†åŒ–åå€¼ä¸º :intervalBegin_div : "+intervalBegin_div +", intervalEnd_div:"+intervalEnd_div);
			
			// å¦‚æœç”¨æˆ·å¾—åˆ†ç™¾åˆ†åŒ–å€¼  åœ¨åŒºé—´ç™¾åˆ†åŒ–å€¼å†…, å³ä¸ºè¦è·å–çš„å€¼
//			if(user_score_div >= intervalBegin_div && user_score_div <= intervalEnd_div){
//				log.info("==============>> ç”¨æˆ·å¾—åˆ†ç™¾åˆ†åŒ–å€¼  åœ¨åŒºé—´ç™¾åˆ†åŒ–å€¼å†…, å³ä¸ºè¦è·å–çš„å€¼ , æ­¤æ—¶çš„ æµ‹è¯„ç»“æœä¸º :"+next.getResultDetail()+"|||| next.getResultSummary()");
//				assessResult.setAqnId(next.getAqnId());
//				assessResult.setResultDetail(next.getResultDetail());
//				assessResult.setResultSummary(next.getResultSummary());
//			}
		}
		
		log.info("==============================>> ç®€å•æµ‹è¯„æ¨¡å‹ è®¡ç®—  è¾“å‡ºç»“æœ :"+assessResult.toString());
		return assessResult;
	}
	
	// è®¡ç®— å¤§äº”æ¨¡å‹
	private AssessResult Calculation_AssessModel_BigFive(Map<String, Object> dataMap,AssessResult assessResult){
		 //  2 å¤§äº”æ¨¡å‹
//		ä¸€ã€æ¯ä¸ªç»´åº¦åˆ†åˆ«åŠ æ€»
		// å½“å‰é—®å· æ‰€æœ‰é—®é¢˜ æ ¹æ®ç»´åº¦è¿›è¡Œåˆ†ç»„  ç»Ÿè®¡æ€»å¾—åˆ† , æ±‚å‡ºæ¯ä¸ªç»´åº¦çš„æ€»å¾—åˆ† 
		List<ScoreByDimension> listMaxScoreByDimension = submitAssessAnsDao.getTotalScoreByDimension(dataMap);
		if(listMaxScoreByDimension != null && listMaxScoreByDimension.size()>0){
			
			String resultSummary_Total = "";
			String resultDetail_Total = "";
			
			Iterator<ScoreByDimension> iterator = listMaxScoreByDimension.iterator();
			
			while(iterator.hasNext()){
				ScoreByDimension maxScoreByDimension = iterator.next();
				
				assessResult.setTotalScore(maxScoreByDimension.getTotalScore());
				
				// æ ¹æ® é—®å·id , ç»´åº¦ç¼–å·, æ€»å¾—åˆ† æŸ¥è¯¢ æµ‹è¯„ç»“æœ
				dataMap.put("dimension", maxScoreByDimension.getDimension());
				dataMap.put("totalScore", maxScoreByDimension.getTotalScore());
				
				List<AssessModel_BigFive> findAssessModel_BigFive = assessModel_BigFiveDao.findAssessModel_BigFive(dataMap);
				if(findAssessModel_BigFive != null && findAssessModel_BigFive.size()>0){
					AssessModel_BigFive assessModel_BigFive = findAssessModel_BigFive.get(0);
					
					String resultSummary = assessModel_BigFive.getResultSummary();
					String resultDetail = assessModel_BigFive.getResultDetail();
					
					resultSummary_Total = resultSummary_Total + resultSummary;
					resultDetail_Total = resultDetail_Total + resultDetail;
				}
				
			}
			
//		äºŒã€çœ‹æ¯ä¸ªç»´åº¦åˆ†æ•° è½åœ¨å„è‡ª å“ªä¸ªåˆ†æ•°æ®µå†…ï¼Œè¾“å‡ºå¯¹åº”çš„åˆ†æ•°æ®µä¸ªäººè§£æ , æŸ¥è¯¢ å¤§äº”æ¨¡å‹è¡¨  å¾—å‡º ç­”é¢˜ç»“æœä¿¡æ¯
			
//		ä¸‰ã€å…¨éƒ¨ç»´åº¦ä¸ªäººè§£æç»„æˆæ€»è§£æ , å°† å¤šä¸ªç»´åº¦å¾—å‡ºçš„è§£æè¿›è¡Œæ‹¼æ¥, å­˜å‚¨
			assessResult.setResultDetail(resultDetail_Total);
			assessResult.setResultSummary(resultSummary_Total);
		}
		
		return assessResult;
	}
	
	private AssessResult Calculation_AssessModel_MBTI(Map<String, Object> dataMap,AssessResult assessResult){
		 // 3 MBTIæ¨¡å‹
//		ä¸€ã€åŠ æ€»æ¯ä¸€ä¸ªä¸€çº§ç»´åº¦ä¸­çš„äºŒçº§ç»´åº¦çš„å¾—åˆ†
		// æŸ¥è¯¢å½“å‰é—®å·æ‰€æœ‰çš„ ä¸€çº§ç»´åº¦ä¸‹å¯¹åº”çš„äºŒçº§ç»´åº¦ é›†åˆ
		List<AssessModel_MBTI> findAssessModel_MBTI = assessModel_MBTIDao.findAssessModel_MBTI(dataMap);
		
		if(findAssessModel_MBTI!=null){
			
			Iterator<AssessModel_MBTI> iterator = findAssessModel_MBTI.iterator();
			
			StringBuffer stringBuffer = new StringBuffer();
			
			while(iterator.hasNext()){
				AssessModel_MBTI next = iterator.next();
				// æŸ¥è¯¢æ¯ä¸ª ä¸€çº§ç»´åº¦ä¸­çš„ä¸¤ä¸ªäºŒçº§ç»´åº¦  
				String leftSecond = next.getLeftSecond();
				String rightSecond = next.getRightSecond();
				
				ArrayList<String> arrayList = new ArrayList<String>();
				arrayList.add(leftSecond);
				arrayList.add(rightSecond);
				
				dataMap.put("dimension_mbti_List", arrayList);
				
			    // ä»è¿™ä¸¤ä¸ªç»´åº¦ä¸­ æŸ¥è¯¢å‡ºåˆ†å€¼é«˜çš„é‚£ä¸ª
//		äºŒã€ç­›é€‰å‡ºæ¯ä¸€ä¸ªä¸€çº§ç»´åº¦ä¸­å¾—åˆ†æœ€é«˜çš„äºŒçº§ç»´åº¦
				List<ScoreByDimension> listMaxScoreByDimension = assessModel_MBTIDao.getMaxScoreByDimension_mbti(dataMap);
				
				if(listMaxScoreByDimension != null && listMaxScoreByDimension.size()>0){
					ScoreByDimension maxScoreByDimension = listMaxScoreByDimension.get(0);
					// è¿”å›çš„ åˆ†å€¼é«˜çš„ äºŒçº§ç»´åº¦ 
					if(maxScoreByDimension != null){
						String dimension_mbti = maxScoreByDimension.getDimensionStr();  //ä¸¤ä¸ª äºŒçº§ç»´åº¦ å¾—åˆ†é«˜çš„ç»´åº¦ ç¼–å· 
						stringBuffer.append(dimension_mbti);
					}
				}else{
					log.info("=======================>> MBTIæ¨¡å‹æ¯ä¸ªä¸€çº§ç»´åº¦ä¸‹çš„ äºŒçº§ç»´åº¦ æ²¡æœ‰æŸ¥è¯¢é™¤ æœ€å¤§å¾—åˆ†çš„ç»´åº¦ç¼–å·");
				}
			}
			
//		ä¸‰ã€æŠŠæ‰€æœ‰å¾—åˆ†æœ€é«˜çš„äºŒçº§ç»´åº¦è”åˆï¼Œè¾“å‡ºå¯¹åº”çš„ä¸ªäººè§£æ
			char[] charArray = stringBuffer.toString().toCharArray();
			
			Set<String> fullPermutation = StrUtils.getFullPermutation(charArray);
			
			dataMap.put("listDimension", fullPermutation);
			
			// æŸ¥è¯¢ MBTI ç»„åˆç¼–å· ,  è¿”å›æµ‹è¯„å†…å®¹ 
			List<AssessModel_mbti_combination> listAssessModel_mbti_combination = assessModel_MBTIDao.getAssessModel_mbti_combination(dataMap);
			
			if(listAssessModel_mbti_combination != null && listAssessModel_mbti_combination.size()>0){
				AssessModel_mbti_combination assessModel_mbti_combination = listAssessModel_mbti_combination.get(0);
				
				if(assessModel_mbti_combination!=null){
					assessResult.setResultDetail(assessModel_mbti_combination.getResultDetail());
					assessResult.setResultSummary(assessModel_mbti_combination.getResultSummary());
				}
			}
		}
		
		return assessResult;
	}
	
	// å¤šç»´åº¦æµ‹è¯„æ¨¡å‹è®¡ç®—
	public AssessResult Calculation_assessModel_multi_Sum(Map<String, Object> dataMap,AssessResult assessResult){
		// æŸ¥è¯¢ä¸€ä»½é—®å·,ä¸€ä¸ªç”¨æˆ·, æ¯ä¸ªç»´åº¦çš„å¹³å‡å¾—åˆ†
		List<ScoreByDimension> listScoreByDimension = submitAssessAnsDao.getScoreByDimension(dataMap);
		// æŸ¥è¯¢  æ¯ä¸ªç»´åº¦, æ¯ä¸ªç”¨æˆ·çš„å¹³å‡å¾—åˆ†
		List<ScoreByDimension> listAllUserScoreByDimension = submitAssessAnsDao.getAllUserScoreByDimension(dataMap);
		// æ ¹æ® ç»´åº¦ç¼–å·æ’åº  
//        Collections.sort(listAllUserScoreByDimension , new Comparator<ScoreByDimension>(){
//            @Override
//            public int compare(ScoreByDimension o1, ScoreByDimension o2) {
//                if (o1.getDimension() >= o2.getDimension()){
//                    return 1;
//                }else{
//                    return -1;
//                }
//            }
//        });
		
		Iterator<ScoreByDimension> iterator = listScoreByDimension.iterator();
		
		Double maxScore = null;  // è®°å½•æœ€å¤§å€¼
		int maxScoreCount = 0;  // æœ€å¤§å€¼çš„ä¸ªæ•°
		List<Integer> dimensionList = new ArrayList<>();  // ç»´åº¦id 
		// è®°å½•æœ€å¤§çš„å¹³å‡å¾—åˆ†å€¼
		while(iterator.hasNext()){
			ScoreByDimension next = iterator.next();
			Double score = next.getScore();  // è·å–å•ä¸ªç»´åº¦çš„å¹³å‡åˆ†
			if(score >= maxScore){
				maxScore = score;
			}
		}
		// åˆ¤æ–­æœ‰å¤šå°‘ä¸ªæœ€å¤§å€¼, è®°å½•ä¸ªæ•°
		while(iterator.hasNext()){
			ScoreByDimension next = iterator.next();
			Double score = next.getScore();  // è·å–å•ä¸ªç»´åº¦çš„å¹³å‡åˆ†
			if(maxScore == score){
				maxScoreCount += 1;
				dimensionList.add(next.getDimension());
			}
		}
		// å¦‚æœåªæœ‰ä¸€ä¸ªæœ€å¤§å€¼, æŸ¥è¯¢å¤šç»´åº¦æµ‹è¯„æ¨¡å‹è¡¨,å°†ç»“æœé¡µæ•°æ®è¿”å›
		if(maxScoreCount == 1){
			dataMap.put("dimension", dimensionList.get(0));
			
			List<AssessModel_multi_Sum> selectByKey = assessModel_multi_SumDao.selectByKey(dataMap);
			
			if(selectByKey != null && selectByKey.size()>0){
				AssessModel_multi_Sum assessModel_multi_Sum = selectByKey.get(0);
				if(assessModel_multi_Sum != null){
					assessResult.setResultSummary(assessModel_multi_Sum.getResultSummary());
					assessResult.setResultDetail(assessModel_multi_Sum.getResultDetail());
				}
			}
			
		}else if(maxScoreCount == 2){
			// æœ‰ä¸¤ä¸ªæœ€å¤§å€¼, æŸ¥è¯¢å…³è”è¾“å‡º
			int dimension_0 = dimensionList.get(0);
			int dimension_1 = dimensionList.get(1);
			
			List<String> arrayList = new ArrayList<>();
			arrayList.add( dimension_0+","+dimension_1);
			arrayList.add( dimension_1+","+dimension_0);
			
			dataMap.put("relationList", arrayList);
			
			List<AssessModelMulti_Relation> findByKeyMap = assessModelMulti_RelationDao.findByKeyMap(dataMap);
			if(findByKeyMap != null && findByKeyMap.size()>0){
				AssessModelMulti_Relation assessModelMulti_Relation = findByKeyMap.get(0);
				
				if(assessModelMulti_Relation != null){
					assessResult.setResultSummary(assessModelMulti_Relation.getResultSummary());
					assessResult.setResultDetail(assessModelMulti_Relation.getResultDetail());
				}
				
			}else{
				// æ²¡æœ‰å…³è”è¾“å‡º , ä¸‹é¢æ ¹æ® æ¯ä¸ªç»´åº¦çš„æ ‡å‡†å·®è®¡ç®—
				assessResult = assessModel_multi_Sum_StandardDiviation(listAllUserScoreByDimension,dataMap,assessResult);
				
				// æ ¹æ®é—®å·id, ç»´åº¦ç¼–å·æŸ¥è¯¢  å¤šç»´åº¦æµ‹è¯„æ¨¡å‹ , è¾“å‡ºä¼˜å…ˆçº§å¤§çš„å“ªä¸€æ¡è®°å½•
//				List<Integer> arrayList2 = new ArrayList<>();
//				arrayList2.add(dimension_0);
//				arrayList2.add(dimension_1);
//				
//				dataMap.put("dimension_list", arrayList2);
//				listMaxScoreByDimension = submitAssessAnsDao.findAssessModelMulti_sum(dataMap);
//				
//				if(listMaxScoreByDimension != null && listMaxScoreByDimension.size()>0){
//					
//					assessResult.setResultSummary(listMaxScoreByDimension.get(0).getResultSummary());
//					assessResult.setResultDetail(listMaxScoreByDimension.get(0).getResultDetail());
//				}
			}
		}else if(maxScoreCount > 2){
			assessResult = assessModel_multi_Sum_StandardDiviation(listAllUserScoreByDimension,dataMap,assessResult);
		}
		return assessResult;
	}
	
	// è®¡ç®—æ ‡å‡†å·®, å¤šç»´åº¦æµ‹è¯„æ¨¡å‹ ä¸€ä»½é—®å·å¤šä¸ªç”¨æˆ·, æ¯ä¸ªç»´åº¦å¾—åˆ†å¹³å‡åˆ†çš„ æ ‡å‡†å·®
	private AssessResult assessModel_multi_Sum_StandardDiviation(List<ScoreByDimension> listAllUserScoreByDimension,
			Map<String, Object> dataMap,AssessResult assessResult){
		// æŸ¥è¯¢ æ¯ä¸ªç»´åº¦çš„æ‰€æœ‰äººç­”é¢˜ æ€»å¾—åˆ†  
		// äºŒã€è®¡ç®—æˆ–ç»™å®šæ€»ä½“å¹³å‡å€¼ï¼ˆğï¼‰ï¼Œğ= "(" ğ’™_ğŸ "+" ğ’™_ğŸ "+â€¦+" ğ’™_ğ’ ")"âˆ•"n "ï¼Œğ’™_ğŸï¼Œğ’™_ğŸï¼Œâ€¦ğ’™_ğ’ 
		// å­˜å‚¨ æ‰€æœ‰ç»´åº¦
		List<Integer> list_dimension = new ArrayList<>();
		
//		ä¸ºæ‰€æœ‰ç­”é¢˜è€…åœ¨è¿™ä¸ªç»´åº¦æ‰€å¾—çš„ä¸ªäººå¹³å‡åˆ†ï¼Œnä¸ºæ€»ç­”é¢˜äººæ•°ï¼ˆæ ·æœ¬æ•°ï¼‰ï¼Œğç»“æœä¿ç•™å°æ•°ç‚¹åä¸‰ä½
		Iterator<ScoreByDimension> iterator2 = listAllUserScoreByDimension.iterator();
		// éå†å¾ªç¯, å­˜å‚¨ ç»´åº¦åˆ—è¡¨ 
		while(iterator2.hasNext()){
			ScoreByDimension next = iterator2.next();
			// å…ˆæ ¹æ®ç»´åº¦è¿›è¡Œåˆ’åˆ† , å¾—å‡ºä¸€ç»„å¹³å‡å€¼, å³ä¸ºæ¯ä¸ªç”¨æˆ·åœ¨è¯¥ç»´åº¦ä¸‹çš„å¾—åˆ†å¹³å‡å€¼
			Integer dimension = next.getDimension();
			if(!list_dimension.contains(dimension)){
				list_dimension.add(dimension);
			}
		}
		// åˆ†ç»„
		if(list_dimension.size()>0){
			
			Integer last_dimension = null;
			Double last_standardDiviation = null;
			
			Iterator<Integer> iterator_list_dimension = list_dimension.iterator();
			while(iterator_list_dimension.hasNext()){
				Integer cur_dimension = iterator_list_dimension.next();
				
				List<Double> double_score = new ArrayList<>();
				while(iterator2.hasNext()){
					ScoreByDimension cur_ScoreByDimension = iterator2.next();
					// éå†åˆ° å½“å‰ç»´åº¦ 
					if(cur_ScoreByDimension.getDimension().equals(cur_dimension)){
						Double cur_score = cur_ScoreByDimension.getScore();
						double_score.add(cur_score);
					}
				}
				// å¾ªç¯ç»“æŸ, å¾—åˆ°å½“å‰ ç»´åº¦ä¸‹çš„æ‰€æœ‰åˆ†å€¼çš„ é›†åˆ double_score 
				// è®¡ç®— æ ‡å‡†å·®
				Double[] array =  (Double[]) double_score.toArray();
				// è®¡ç®—æ ‡å‡†å·®
				double standardDiviation = VarianceAndStandardDiviation.StandardDiviation(array);
				
				if(last_standardDiviation != null){
					if(standardDiviation < last_standardDiviation){
						last_standardDiviation = standardDiviation;
						last_dimension = cur_dimension;
					}
				}else{
					last_standardDiviation = standardDiviation;
					last_dimension = cur_dimension;
				}
			}
			
			// å¾ªç¯ç»“æŸ, å¾—åˆ°åˆ†å€¼æ ‡å‡†å·®æœ€å°çš„ ç»´åº¦å’Œæ ‡å‡†å·®
			dataMap.put("dimension", last_dimension);
			List<AssessModel_multi_Sum> selectByKey = assessModel_multi_SumDao.selectByKey(dataMap);
			if(selectByKey.size() > 0){
				AssessModel_multi_Sum assessModel_multi_Sum = selectByKey.get(0);
				assessResult.setResultDetail(assessModel_multi_Sum.getResultDetail());
				assessResult.setResultSummary(assessModel_multi_Sum.getResultSummary());
			}
			
		}
		return assessResult;
	}

	//ä»è®¢å•è¡¨é‡Œè·å–æµ‹è¯„ç»“æœ
	public AssessResult getAssessResultFromOrder(int user_Id, int aqn_Id){
		Map<String, Object> param = new HashMap<String, Object>();// å°†å‚æ•°å°è£…æˆmapæ ¼å¼
		param.put("userId", user_Id);
		param.put("aqnId", aqn_Id);		
		return submitAssessAnsDao.getAssessResultFromOrder(param);
	}
	
	/**
	 * éªŒè¯æ˜¯å¦ç­”é¢˜äººæ•°è¾¾åˆ°éœ€è¦æ”¶é›†äººæ•°ï¼Œå¦‚æœè¾¾åˆ°å°†é—®å·çŠ¶æ€æ”¹ä¸º6ï¼Œæ•°é‡å®Œæˆ
	 */
	public void changeDeliveryStatus(int deliveryId) {
		
		Assess assess = submitAssessAnsDao.getCollectedNumById(deliveryId);
		
		if (assess.getCollectedNum() >= assess.getCollectNum()) {
			submitAssessAnsDao.changeDeliveryStatus(deliveryId);
			log.info("-------------------->> Delivery status has been changed into 6 number is over");// 6ä¸ºæ•°é‡å®ŒæˆçŠ¶æ€
		} else {
			log.info("-------------------->> Delivery status is not changed");
		}
	}

	// æŸ¥è¯¢æµ‹è¯„ç»“æœ 
	public AjaxResult getAssessResultFromOrder(HttpServletRequest request) {
		
		AjaxResult ajaxResult = new AjaxResult();

		HttpSession newSession = request.getSession(true);
		Object userId = newSession.getAttribute("userId");
		
		String aqnId_str = request.getParameter("aqnId");
		int aqnId = Integer.parseInt(aqnId_str);
		
		// åˆ¤æ–­å½“å‰æµ‹è¯„é—®å·çš„ç±»å‹
		if (userId != null) {
			int user_Id = Integer.parseInt(userId.toString());
			
			Map<String, Object> dataMap = new HashMap<String, Object>();// å°†å‚æ•°å°è£…æˆmapæ ¼å¼
			
			dataMap.put("userId", user_Id);
			dataMap.put("aqnId", aqnId);		
			
			// æ ¹æ®ç”¨æˆ·id , é—®å·id , æŸ¥è¯¢è®¢å•è¡¨, å¦‚æœæœ‰è®°å½•, ä»£è¡¨å½“å‰é—®å·è¢«å½“å‰ç”¨æˆ·ç­”è¿‡ 
			AssessResult assessResultFromOrder = submitAssessAnsDao.getAssessResultFromOrder(dataMap);
			
			if(assessResultFromOrder != null){
				
				String resultSummary = assessResultFromOrder.getResultSummary();
				String resultDetail = assessResultFromOrder.getResultDetail();
				
				ajaxResult.put("success", true);
				ajaxResult.put("resultSummary", resultSummary);
				ajaxResult.put("resultDetail", resultDetail);
				
				
			}else{
				log.info("----------------->>åŠ è½½æµ‹è¯„ç»“æœé¡µé¢ä¸ºç©º ..... å¯èƒ½å½“å‰ç”¨æˆ·æœªç­”è¿‡å½“å‰è¿™é“é¢˜");
				return AjaxResult.errorCode("å½“å‰ç”¨æˆ·æœªç­”è¿‡å½“å‰è¿™é“é¢˜", "002");
			}

		}else{
			return AjaxResult.errorCode("ç”¨æˆ·æœªç™»å½•,æ— æ³•åŠ è½½æµ‹è¯„é—®å·ç­”é¢˜ç»“æœé¡µ", "001");
		}
		
		return ajaxResult;
	}

	//æµ‹è¯„é—®å·æäº¤
	public AjaxResult submitAssessAnswer(HttpServletRequest request) {
		log.info("============================>> æµ‹è¯„é—®å·æäº¤ : begin ....==================>>");
		// å–å‡ºrequestçš„å‚æ•°ï¼Œå…¶ä¸­answersä¸ºJSONArray,å…¶ä½™å˜é‡ä¸ºå•å€¼å˜é‡
		HttpSession newSession = request.getSession(true);
		Object userId_obj = newSession.getAttribute("userId");
		
		/**
		 * ç”Ÿæˆä¸´æ—¶ç”¨æˆ·id è¿ç§»åˆ°åŠ è½½æµ‹è¯„é—®å·ä¸­
		 */
		if(userId_obj == null){
			log.info("===================>>å½“å‰ç™»å½•ç”¨æˆ·idä¸ºç©º");
			return AjaxResult.errorCode("ç”¨æˆ·æœªç™»å½•", "001");
		}else{
			//ç”¨æˆ·å·²ç»ç™»å½•
			// --------------------------ä»é¡µé¢è·å–ä¸€å †å‚æ•° -------------begin-----------
			Integer userId = Integer.parseInt(userId_obj.toString());
			
			String answerNum = request.getParameter("answerNum");
			String aqnId = request.getParameter("aqnId");
			String awardIdStr = request.getParameter("awardId");
			String answerBTimeStr = request.getParameter("answerBTime");
			String answers = request.getParameter("answers");
			String deliveryId = request.getParameter("deliveryId");
			String awardMethodStr = request.getParameter("awardMethod");
			String aqnCategoryStr = request.getParameter("aqnCategory");
			
			log.info("=====================>> æµ‹è¯„é—®å·æäº¤ , ä»é¡µé¢è·å–çš„å‚æ•°æœ‰ , answerNum :"+answerNum+", aqnId:"+aqnId+",awardIdStr :"+awardIdStr+",answerBTimeStr:"+answerBTimeStr);
			log.info("=====================>> æµ‹è¯„é—®å·æäº¤ , ä»é¡µé¢è·å–çš„å‚æ•°æœ‰ , answers :"+answers);
			log.info("=====================>> æµ‹è¯„é—®å·æäº¤ , ä»é¡µé¢è·å–çš„å‚æ•°æœ‰ , deliveryId:"+deliveryId+",awardMethodStr :"+awardMethodStr+",aqnCategoryStr:"+aqnCategoryStr);
			
			int answer_Num = 0;
			int aqn_Id = 0;
			int award_Id = 0;
			Timestamp answerBTime = null;
			int delivery_Id = 0;
			int aqnCategory = 0;
			int awardMethod = 0;
			try {
				answer_Num = StrUtils.changeToInt(answerNum);
				aqn_Id = StrUtils.changeToInt(aqnId);
				award_Id = StrUtils.changeToInt(awardIdStr);
				
				answerBTime = Timestamp.valueOf(answerBTimeStr);
				delivery_Id = Integer.parseInt(deliveryId);
				aqnCategory = 0;
				if(StrUtils.isNotEmpty(aqnCategoryStr)){
					aqnCategory = Integer.parseInt(aqnCategoryStr);
				}
				awardMethod = 0;
				if (StrUtils.isNotEmpty(awardMethodStr)) {
					awardMethod = Integer.parseInt(awardMethodStr);
				}
			} catch (NumberFormatException e1) {
				e1.printStackTrace();
			}
			
			// å°†answersè½¬åŒ–æˆå¤§çš„JSONå¯¹è±¡
			String answerStr = "{'answers':" + answers + "}";
			JSONObject jsonObject = JSONObject.fromObject(answerStr);
			// å–å‡ºanswersçš„JSONArray
			JSONArray jsonAnswerArray = jsonObject.getJSONArray("answers");
			// --------------------------ä»é¡µé¢è·å–ä¸€å †å‚æ•° -------------end-----------
			
			// æ ¹æ®æŠ•æ”¾idæŸ¥è¯¢æŠ•æ”¾çŠ¶æ€
			AssessDelivery assessDelivery = assessDeliveryService.getDeliveryStatusById(delivery_Id);
			
			if (assessDelivery != null) {
				int deliveryStatus = assessDelivery.getStatus();
				if (deliveryStatus == 2) {
					// å¦‚æœæŠ•æ”¾çŠ¶æ€ä¸ºæŠ•æ”¾ä¸­åˆ™å‘ä¸‹è¿›è¡Œ
					// åˆ›å»ºä¸€æ¡è®¢å•ï¼Œè¿”å›è®¢å•åˆ›å»ºæ˜¯å¦æˆåŠŸçš„çŠ¶æ€
					/*
					 * ç”¨æˆ·ç­”é¢˜æ—¶éœ€è¦åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦ç­”è¿‡è¯¥é“é¢˜, å¦‚æœç­”è¿‡å°±ç›´æ¥æ˜¾ç¤ºç­”é¢˜ç»“æœé¡µ 
					 * å¦‚ä½•åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç­”è¿‡å½“å‰è¿™é“é¢˜, ä»¥å‰çš„ä¸šåŠ¡é€»è¾‘æ˜¯å…ˆåˆ°è®¢å•è¡¨ä¸­æ ¹æ® ç”¨æˆ·id,é—®å·idæŸ¥è¯¢, å¦‚æœæœ‰è®°å½•åˆ™è¯´æ˜ç”¨æˆ·å·²ç»ç­”è¿‡é¢˜
					 * ç”¨æˆ·ç­”é¢˜æ•°æ®éœ€è¦å­˜å‚¨åˆ°ä¸¤å¼ è¡¨ Orderè¡¨å’Œ Answerè¡¨, 
					 * å…ˆåˆ° orderè¡¨æŸ¥è¯¢æ˜¯å¦æœ‰è®°å½•, å¦‚æœæ²¡æœ‰åˆ™æ–°å¢, å¦‚æœæœ‰å°±è¿”å›å·²ç»ç­”è¿‡æ ‡è¯†, å½“ç”¨æˆ·æœªç­”è¿‡è¯¥é¢˜, Orderè¡¨ä¸­æ–°å¢æ•°æ®å, åˆéœ€å‘ Answerè¡¨ä¸­æ–°å¢æ•°æ®
					 * æˆ‘é‡åˆ°è¿‡ä¸€æ¬¡é—®é¢˜æ˜¯, Orderè¡¨ä¸­æ ¹æ®ç”¨æˆ·id,é—®å·idæŸ¥è¯¢æ˜¯æ²¡æœ‰è®°å½•, ä½†æ˜¯ æ ¹æ®ç”¨æˆ·id,é—®å·id æŸ¥è¯¢answerè¡¨ å±…ç„¶æœ‰æ•°æ®, è¿™æ—¶å€™å¦‚æœå‘ Answerè¡¨æ–°å¢æ•°æ®å°±ä¼šä¸»é”®å†²çª
					 * ä¸çŸ¥é“æ˜¯æ•°æ®çš„é—®é¢˜è¿˜æ˜¯ä»€ä¹ˆ ? 
					 * æŒ‰é“ç†æ¥è¯´ä¹‹å‰çš„é€»è¾‘å®‰å…¨æ€§ä¸å¤Ÿå¥½, ä¸èƒ½åœ¨ä¸€å¼ è¡¨ä¸­åˆ¤æ–­æ˜¯å¦ç­”è¿‡é¢˜,ç„¶åå‘å¦ä¸€å¼ è¡¨æ–°å¢æ•°æ® 
					 * 
					 * */
					
					// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»ç­”è¿‡é¢˜ , å¦‚æœå·²ç»ç­”è¿‡, orderè¡¨, answerè¡¨ä¸­éƒ½åº”è¯¥æœ‰æ•°æ® , å¦‚æœæ²¡æœ‰æ•°æ®åˆ™ä»£è¡¨æ²¡æœ‰ç­”è¿‡è¿™é“é¢˜
					
					// åˆ›å»ºorderå‰å…ˆæŸ¥è¯¢å¹¶åˆ¤æ–­è¿™æ¡è®¢å•æ˜¯å¦å­˜åœ¨
					Map<String, Object> dataMap = new HashMap<String, Object>();// å°†å‚æ•°å°è£…æˆmapæ ¼å¼
					dataMap.put("userId", userId);
					dataMap.put("aqnId", aqn_Id);
					AssessOrder assessOrder = assessOrderDao.getAssessOrder(dataMap);
					
					// å¦‚æœæ²¡æœ‰æ•°æ®åˆ™ä»£è¡¨æ²¡æœ‰ç­”è¿‡è¿™é“é¢˜
					if(assessOrder == null){
						log.info("=================>> ä» order è¡¨ä¸­æŸ¥è¯¢, æ²¡æœ‰æ•°æ®, è¯´æ˜å½“å‰ç”¨æˆ·æ²¡æœ‰ç­”è¿‡è¿™é“é¢˜.... ");
						// æ–°å¢æ•°æ®åˆ° orderè¡¨, answerè¡¨
						assessOrder = new AssessOrder(); // è®¢å•ä¸å­˜åœ¨, åˆ›å»ºä¸€æ¡æ–°çš„è®¢å•
						
						Timestamp orderCTime = new Timestamp(System.currentTimeMillis());// è·å–å½“å‰ç³»ç»Ÿæ—¶é—´
						Timestamp answerETime = new Timestamp(System.currentTimeMillis());
		
						assessOrder.setUserId(userId);
						assessOrder.setDeliveryId(delivery_Id);
						assessOrder.setAqnId(aqn_Id);
						assessOrder.setOrderCTime(orderCTime);
						assessOrder.setAnswerETime(answerETime);
						assessOrder.setOrderStatus(1);// è®¢å•çŠ¶æ€ä¸ºè®¢å•ç”Ÿæˆ
						assessOrder.setAnswerBTime(answerBTime);
						assessOrder.setAwardId(award_Id);
						assessOrder.setAwardMethod(awardMethod);
						// å¦‚æœè¯¥è®¢å•ç»“æœä¸å­˜åœ¨åˆ™ç”Ÿæˆä¸€æ¡è®¢å•
						// é€’äº¤ç»™Daoç”Ÿæˆè®¢å•
						
						try {
							submitAssessAnsDao.initAssessOrder(assessOrder);
							log.info("------------------------->> æµ‹è¯„é—®å·ç­”é¢˜ ä¿¡æ¯ , è¿™äº›æ•°æ®æ˜¯orderè¡¨ä¸­ä¸€èˆ¬ä¿¡æ¯,åŒ…æ‹¬ ç”¨æˆ·id,æŠ•æ”¾id,æ—¶é—´,çŠ¶æ€ ,  å·²ç»æ–°å¢æ•°æ®åˆ° orderè¡¨ä¸­  ");
							log.info("------------------------->> æµ‹è¯„é—®å·ç­”é¢˜ ä¿¡æ¯ , æ­¤æ—¶çš„ orderè¡¨ä¸­è¿˜æ²¡æœ‰ resultSummary, resultDetail æ•°æ®  ");
						} catch (Exception e) {
							e.printStackTrace();
							log.info("===============================>>æµ‹è¯„é—®å·ç­”é¢˜æ–°å¢åˆ°orderè¡¨å¤±è´¥");
							return AjaxResult.errorCode("ç”¨æˆ·ç­”é¢˜åˆ›å»ºè®¢å•å¤±è´¥", "005");
						}
						
						AjaxResult insertAssessAnswer = insertAssessAnswer(userId, answer_Num, aqn_Id, jsonAnswerArray, delivery_Id, aqnCategory);
						
						return insertAssessAnswer;
					}else{
						// å¦‚æœå·²ç»ç­”è¿‡, orderè¡¨, answerè¡¨ä¸­éƒ½åº”è¯¥æœ‰æ•°æ® 
						return AjaxResult.errorCode("å½“å‰ç”¨æˆ·å·²ç»ç­”è¿‡è¿™é“é¢˜", "004");
					}
					
				} else {
					return AjaxResult.errorCode("å½“å‰æµ‹è¯„æŠ•æ”¾çŠ¶æ€å¹¶ä¸æ˜¯æŠ•æ”¾ä¸­", "003");
				}

			} else {
				return AjaxResult.errorCode("å½“å‰æµ‹è¯„æŠ•æ”¾ä¸å­˜åœ¨", "002");
			}

		}
	}
}
